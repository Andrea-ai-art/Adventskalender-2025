<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Andrea's Adventskalender 2025</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#f7fbff;
    --panel:#ffffff;
    --accent:#3b6ea5; /* blau */
    --metal:#c9d6df;  /* silber */
    --gold:#d4caa7;
    --shadow:rgba(15,25,40,0.08);
  }
  html,body{height:100%;margin:0;font-family:Roboto,system-ui,Segoe UI,Arial; background: radial-gradient(circle at top right, #eef6ff, var(--bg)); color:#123; }
  .wrap{max-width:1100px;margin:24px auto;padding:28px;}
  header{display:flex;align-items:center;gap:18px}
  .title{
    font-size:28px;color:var(--accent);font-weight:700;
  }
  .subtitle{color:#456; font-size:14px;margin-top:6px}
  .frame{
    margin-top:18px;
    background:linear-gradient(180deg, rgba(255,255,255,0.8), rgba(245,250,255,0.95));
    border-radius:18px;padding:28px; box-shadow: 0 6px 30px var(--shadow);
    border:1px solid rgba(220,225,230,0.6);
  }

  /* calendar grid */
  .calendar{
    display:grid;
    grid-template-columns: repeat(6, 1fr);
    gap:14px;
    padding:18px;
  }
  @media (max-width:800px){ .calendar{grid-template-columns:repeat(4,1fr);} }
  @media (max-width:480px){ .calendar{grid-template-columns:repeat(3,1fr);} }

  .door{
    position:relative;
    height:120px;
    background: linear-gradient(180deg,#fff,#B0C4DE;);
    border-radius:10px;
    border: 1px solid rgba(200,210,220,0.8);
    display:flex;align-items:center;justify-content:center;
    box-shadow: 0 6px 18px rgba(0,0,0,0.05);
    cursor:pointer; perspective:900px;
    overflow:visible;
  }
  .door.locked{cursor:default; opacity:0.6; filter:grayscale(0.05);}

  /* number style (verschnörkelt) */
  .num{
    font-family:'Great Vibes', serif;
    font-size:44px;
    color:var(--metal);
    text-shadow: 0 2px 0 rgba(0,0,0,0.05);
  }

  /* inner door flap (for animation) */
  .flap{
    position:absolute; inset:6px; border-radius:8px;
    background: linear-gradient(180deg,#fff,#eaf2fb);
    transform-origin:left center;
    transition: transform 600ms cubic-bezier(.2,.9,.2,1), box-shadow 400ms;
    display:flex; align-items:center; justify-content:center;
    backface-visibility:hidden;
    border:1px solid rgba(200,210,220,0.9);
  }
  .door.open .flap{
    transform: rotateY(-140deg) translateX(-6px);
    box-shadow: 0 18px 40px rgba(10,20,40,0.18);
  }

  /* reveal panel (behind the flap) */
  .panel{
    position:absolute; inset:6px; border-radius:8px;
    background: linear-gradient(180deg, rgba(240,246,255,0.9), rgba(250,252,255,0.95));
    display:flex; align-items:center; justify-content:center;
    padding:10px; text-align:center;
    font-size:13px; color:#234; box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    border:1px dashed rgba(180,200,220,0.6);
  }

  .hint{font-size:13px;color:#456; margin-top:8px}
  .countdown{font-weight:500;color:#234; margin-left:auto; text-align:right}

  /* modal */
  .modal{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    background:rgba(6,10,20,0.45); z-index:60;
  }
  .modal .box{
    width:min(720px,92%); background:var(--panel); border-radius:12px; padding:20px; box-shadow:0 14px 40px rgba(0,0,0,0.45);
    border:1px solid rgba(220,225,230,0.7);
  }
  .modal h3{margin:0 0 12px 0; color:var(--accent)}
  .modal p{margin:8px 0;color:#334}
  .btn{display:inline-block;background:var(--accent);color:#fff;padding:10px 14px;border-radius:8px;text-decoration:none;margin:6px 6px 0 0;}
  .btn.secondary{background:#fff;color:var(--accent);border:1px solid rgba(0,0,0,0.06)}

  footer{margin-top:18px;color:#6a7890;font-size:13px; text-align:center}
  .tiny{font-size:12px;color:#8aa}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div style="width:62px;height:62px;border-radius:12px;background:linear-gradient(135deg,#fff,#eaf6ff);display:flex;align-items:center;justify-content:center;border:1px solid rgba(200,220,230,0.9);box-shadow:0 6px 18px rgba(0,0,0,0.04)">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M12 2l2.3 4.7L19 8l-3.4 2.6L16.6 15 12 12.7 7.4 15l1-4.4L5 8l4.7-1.3L12 2z" fill="#3b6ea5"/></svg>
      </div>
      <div>
        <div class="title">Andrea's Adventskalender 2025</div>
        <div class="subtitle">Ein kleines Türchen täglich – klassisch, elegant, überraschend.</div>
      </div>
      <div class="countdown" id="countdown"></div>
    </header>

    <div class="frame">
      <div class="calendar" id="calendar">
        <!-- 24 doors will be injected by JS -->
      </div>

      <div class="hint">Tipp: Die Türchen öffnen sich automatisch am jeweiligen Datum. Bereits geöffnete Türchen bleiben offen.</div>
    </div>

    <footer>
      <div class="tiny">© Andrea — Adventskalender 2025. Platzhalter-Links können später geändert werden.</div>
    </footer>
  </div>

  <!-- modal -->
  <div class="modal" id="modal">
    <div class="box">
      <h3 id="modalTitle">Tür</h3>
      <p id="modalBody">Inhalt</p>
      <div style="display:flex;gap:10px;justify-content:flex-end">
        <a id="openLink" class="btn" target="_blank" rel="noopener">Öffnen</a>
        <button id="closeBtn" class="btn secondary">Schließen</button>
      </div>
    </div>
  </div>

<script>
(function(){
  // config: placeholder links (change later easily)
  const placeholders = [
    "https://example.com/placeholder1",
    "https://example.com/placeholder2",
    "https://example.com/placeholder3",
    "https://example.com/placeholder4",
    "https://example.com/placeholder5",
    "https://example.com/placeholder6",
    "https://example.com/placeholder7",
    "https://example.com/placeholder8",
    "https://example.com/placeholder9",
    "https://example.com/placeholder10",
    "https://example.com/placeholder11",
    "https://example.com/placeholder12",
    "https://example.com/placeholder13",
    "https://example.com/placeholder14",
    "https://example.com/placeholder15",
    "https://example.com/placeholder16",
    "https://example.com/placeholder17",
    "https://example.com/placeholder18",
    "https://example.com/placeholder19",
    "https://example.com/placeholder20",
    "https://example.com/placeholder21",
    "https://example.com/placeholder22",
    "https://example.com/placeholder23",
    "https://example.com/placeholder24"
  ];

  const calendarEl = document.getElementById('calendar');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalBody = document.getElementById('modalBody');
  const openLink = document.getElementById('openLink');
  const closeBtn = document.getElementById('closeBtn');
  const countdownEl = document.getElementById('countdown');

  const today = new Date();
  // target year & month:
  const YEAR = 2025;
  const MONTH = 11; // December: month index 11

  // create doors
  for(let i=1;i<=24;i++){
    const door = document.createElement('div');
    door.className = 'door';
    door.dataset.day = i;

    const flap = document.createElement('div');
    flap.className = 'flap';
    flap.innerHTML = '<div class="num">'+i+'</div>';

    const panel = document.createElement('div');
    panel.className = 'panel';
    panel.innerHTML = '<div>Tür '+i+'</div>';

    door.appendChild(panel);
    door.appendChild(flap);
    calendarEl.appendChild(door);
  }

  // helper: get status from storage
  function isOpened(day){ return localStorage.getItem('advent_opened_'+day) === '1'; }
  function setOpened(day){ localStorage.setItem('advent_opened_'+day,'1'); }

  // check date allowed
  function isAllowed(day){
    // allow if current date >= day of Dec YEAR
    const allowedDate = new Date(YEAR, MONTH, day, 0,0,0);
    return today >= allowedDate;
  }

  // build UI
  function refresh(){
    const doors = document.querySelectorAll('.door');
    doors.forEach(d=>{
      const day = parseInt(d.dataset.day,10);
      d.classList.remove('open','locked');
      if(isOpened(day)){
        d.classList.add('open');
      } else if(!isAllowed(day)){
        d.classList.add('locked');
      }
    });

    // countdown if before Dec 1
    const dec1 = new Date(YEAR, MONTH, 1, 0,0,0);
    if(today < dec1){
      const diff = dec1 - today;
      const days = Math.ceil(diff / (1000*60*60*24));
      countdownEl.innerHTML = `<div style="font-size:14px;color:#345">Noch ${days} Tag(e) bis 01.12.2025</div>`;
    } else {
      countdownEl.innerHTML = '<div style="font-size:14px;color:#345">Viel Spaß – öffne ein Türchen!</div>';
    }
  }

  refresh();

  // door click handler
  calendarEl.addEventListener('click', e=>{
    const door = e.target.closest('.door');
    if(!door) return;
    const day = parseInt(door.dataset.day,10);

    if(!isAllowed(day)){
      // user clicked too early
      modalTitle.innerText = 'Noch nicht verfügbar';
      modalBody.innerText = 'Dieses Türchen kann erst am ' + new Date(YEAR, MONTH, day).toLocaleDateString() + ' geöffnet werden.';
      openLink.style.display = 'none';
      modal.style.display = 'flex';
      return;
    }

    // open door animation and show link
    if(!isOpened(day)){
      door.classList.add('open');
      setOpened(day);
    } else {
      door.classList.add('open');
    }

    // show modal with placeholder link
    modalTitle.innerText = 'Tür ' + day;
    modalBody.innerHTML = 'Klicke auf "Öffnen", um das Geschenk zu sehen. (Platzhalter-Link)';
    openLink.href = placeholders[day-1] || '#';
    openLink.style.display = 'inline-block';
    modal.style.display = 'flex';
  });

  closeBtn.addEventListener('click', ()=>{ modal.style.display='none'; });

  // close modal on background click
  modal.addEventListener('click', (e)=>{ if(e.target === modal) modal.style.display='none'; });

  // play soft bell chime periodically (very subtle)
  try {
    const AudioCtx = window.AudioContext || window.webkitAudioContext;
    const ctx = new AudioCtx();
    const masterGain = ctx.createGain();
    masterGain.gain.value = 0.06; // very quiet
    masterGain.connect(ctx.destination);

    function bell(time){
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'sine';
      // inharmonic bell-ish frequencies
      o.frequency.setValueAtTime(880, time);
      o.frequency.exponentialRampToValueAtTime(1320, time+0.3);
      g.gain.setValueAtTime(0, time);
      g.gain.linearRampToValueAtTime(0.08, time+0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, time+1.8);
      o.connect(g); g.connect(masterGain);
      o.start(time); o.stop(time+2.2);
    }

    function scheduleBells(){
      const now = ctx.currentTime;
      bell(now + 0.3);
      // schedule gentle repeating bells every ~8-12 seconds randomly to avoid loop monotony
      const nextDelay = 8 + Math.random()*6;
      setTimeout(scheduleBells, nextDelay*1000);
    }

    // resume context on first user interaction (autoplay policy)
    function startAudio(){
      if(ctx.state === 'suspended'){ ctx.resume(); }
      scheduleBells();
      window.removeEventListener('click', startAudio);
      window.removeEventListener('keydown', startAudio);
    }
    window.addEventListener('click', startAudio);
    window.addEventListener('keydown', startAudio);
  } catch(e){
    console.warn('Audio not supported', e);
  }

})();
</script>
</body>
</html>
