<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Andrea's Adventskalender 2025</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

  <style>
/* Hintergrund der Seite */
body {
    background: linear-gradient(to bottom, #f0f8ff, #d6e0f0); /* Weiß-Blau-Gradient */
    font-family: 'Arial', sans-serif;
}

/* Kalender-Container */
#calendar {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 15px;
    max-width: 900px;
    margin: 50px auto;
}

/* Türchen */
.door {
    background-color: #C0C0C0; /* helles Silber */
    border: 2px solid #104E8B; /* dunkles Blau für Rand */
    border-radius: 8px;
    width: 100px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
}

/* Zahl auf Türchen */
.door span {
    color: #1E90FF; /* kräftiges Blau */
    font-size: 24px;
    font-weight: bold;
}

/* Hover-Effekt */
.door:hover {
    background-color: #b0b0b0; /* leicht dunkleres Silber */
    transform: scale(1.05);
}

/* Türchen beim Anklicken (animiert aufklappen) */
.door.opening {
    animation: openDoor 0.5s forwards;
}

@keyframes openDoor {
    0% { transform: rotateY(0deg); }
    100% { transform: rotateY(15deg) scale(1.05); }
}

/* Optionale Schatten für mehr Tiefe */
.door::after {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
    border-radius: 8px;
}
</style>

</head>
<body>
  <div class="wrap">
    <header>
      <div style="width:62px;height:62px;border-radius:12px;background:linear-gradient(135deg,#fff,#eaf6ff);display:flex;align-items:center;justify-content:center;border:1px solid rgba(200,220,230,0.9);box-shadow:0 6px 18px rgba(0,0,0,0.04)">
        <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><path d="M12 2l2.3 4.7L19 8l-3.4 2.6L16.6 15 12 12.7 7.4 15l1-4.4L5 8l4.7-1.3L12 2z" fill="#3b6ea5"/></svg>
      </div>
      <div>
        <div class="title">Andrea's Adventskalender 2025</div>
        <div class="subtitle">Ein kleines Türchen täglich – klassisch, elegant, überraschend.</div>
      </div>
      <div class="countdown" id="countdown"></div>
    </header>

    <div class="frame">
      <div class="calendar" id="calendar">
        <!-- 24 doors will be injected by JS -->
      </div>

      <div class="hint">Tipp: Die Türchen öffnen sich automatisch am jeweiligen Datum. Bereits geöffnete Türchen bleiben offen.</div>
    </div>

    <footer>
      <div class="tiny">© Andrea — Adventskalender 2025. Platzhalter-Links können später geändert werden.</div>
    </footer>
  </div>

  <!-- modal -->
  <div class="modal" id="modal">
    <div class="box">
      <h3 id="modalTitle">Tür</h3>
      <p id="modalBody">Inhalt</p>
      <div style="display:flex;gap:10px;justify-content:flex-end">
        <a id="openLink" class="btn" target="_blank" rel="noopener">Öffnen</a>
        <button id="closeBtn" class="btn secondary">Schließen</button>
      </div>
    </div>
  </div>

<script>
(function(){
  // config: placeholder links (change later easily)
  const placeholders = [
    "https://example.com/placeholder1",
    "https://example.com/placeholder2",
    "https://example.com/placeholder3",
    "https://example.com/placeholder4",
    "https://example.com/placeholder5",
    "https://example.com/placeholder6",
    "https://example.com/placeholder7",
    "https://example.com/placeholder8",
    "https://example.com/placeholder9",
    "https://example.com/placeholder10",
    "https://example.com/placeholder11",
    "https://example.com/placeholder12",
    "https://example.com/placeholder13",
    "https://example.com/placeholder14",
    "https://example.com/placeholder15",
    "https://example.com/placeholder16",
    "https://example.com/placeholder17",
    "https://example.com/placeholder18",
    "https://example.com/placeholder19",
    "https://example.com/placeholder20",
    "https://example.com/placeholder21",
    "https://example.com/placeholder22",
    "https://example.com/placeholder23",
    "https://example.com/placeholder24"
  ];

  const calendarEl = document.getElementById('calendar');
  const modal = document.getElementById('modal');
  const modalTitle = document.getElementById('modalTitle');
  const modalBody = document.getElementById('modalBody');
  const openLink = document.getElementById('openLink');
  const closeBtn = document.getElementById('closeBtn');
  const countdownEl = document.getElementById('countdown');

  const today = new Date();
  // target year & month:
  const YEAR = 2025;
  const MONTH = 11; // December: month index 11

  // create doors
  for(let i=1;i<=24;i++){
    const door = document.createElement('div');
    door.className = 'door';
    door.dataset.day = i;

    const flap = document.createElement('div');
    flap.className = 'flap';
    flap.innerHTML = '<div class="num">'+i+'</div>';

    const panel = document.createElement('div');
    panel.className = 'panel';
    panel.innerHTML = '<div>Tür '+i+'</div>';

    door.appendChild(panel);
    door.appendChild(flap);
    calendarEl.appendChild(door);
  }

  // helper: get status from storage
  function isOpened(day){ return localStorage.getItem('advent_opened_'+day) === '1'; }
  function setOpened(day){ localStorage.setItem('advent_opened_'+day,'1'); }

  // check date allowed
  function isAllowed(day){
    // allow if current date >= day of Dec YEAR
    const allowedDate = new Date(YEAR, MONTH, day, 0,0,0);
    return today >= allowedDate;
  }

  // build UI
  function refresh(){
    const doors = document.querySelectorAll('.door');
    doors.forEach(d=>{
      const day = parseInt(d.dataset.day,10);
      d.classList.remove('open','locked');
      if(isOpened(day)){
        d.classList.add('open');
      } else if(!isAllowed(day)){
        d.classList.add('locked');
      }
    });

    // countdown if before Dec 1
    const dec1 = new Date(YEAR, MONTH, 1, 0,0,0);
    if(today < dec1){
      const diff = dec1 - today;
      const days = Math.ceil(diff / (1000*60*60*24));
      countdownEl.innerHTML = `<div style="font-size:14px;color:#345">Noch ${days} Tag(e) bis 01.12.2025</div>`;
    } else {
      countdownEl.innerHTML = '<div style="font-size:14px;color:#345">Viel Spaß – öffne ein Türchen!</div>';
    }
  }

  refresh();

  // door click handler
  calendarEl.addEventListener('click', e=>{
    const door = e.target.closest('.door');
    if(!door) return;
    const day = parseInt(door.dataset.day,10);

    if(!isAllowed(day)){
      // user clicked too early
      modalTitle.innerText = 'Noch nicht verfügbar';
      modalBody.innerText = 'Dieses Türchen kann erst am ' + new Date(YEAR, MONTH, day).toLocaleDateString() + ' geöffnet werden.';
      openLink.style.display = 'none';
      modal.style.display = 'flex';
      return;
    }

    // open door animation and show link
    if(!isOpened(day)){
      door.classList.add('open');
      setOpened(day);
    } else {
      door.classList.add('open');
    }

    // show modal with placeholder link
    modalTitle.innerText = 'Tür ' + day;
    modalBody.innerHTML = 'Klicke auf "Öffnen", um das Geschenk zu sehen. (Platzhalter-Link)';
    openLink.href = placeholders[day-1] || '#';
    openLink.style.display = 'inline-block';
    modal.style.display = 'flex';
  });

  closeBtn.addEventListener('click', ()=>{ modal.style.display='none'; });

  // close modal on background click
  modal.addEventListener('click', (e)=>{ if(e.target === modal) modal.style.display='none'; });

  // play soft bell chime periodically (very subtle)
  try {
    const AudioCtx = window.AudioContext || window.webkitAudioContext;
    const ctx = new AudioCtx();
    const masterGain = ctx.createGain();
    masterGain.gain.value = 0.06; // very quiet
    masterGain.connect(ctx.destination);

    function bell(time){
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'sine';
      // inharmonic bell-ish frequencies
      o.frequency.setValueAtTime(880, time);
      o.frequency.exponentialRampToValueAtTime(1320, time+0.3);
      g.gain.setValueAtTime(0, time);
      g.gain.linearRampToValueAtTime(0.08, time+0.02);
      g.gain.exponentialRampToValueAtTime(0.0001, time+1.8);
      o.connect(g); g.connect(masterGain);
      o.start(time); o.stop(time+2.2);
    }

    function scheduleBells(){
      const now = ctx.currentTime;
      bell(now + 0.3);
      // schedule gentle repeating bells every ~8-12 seconds randomly to avoid loop monotony
      const nextDelay = 8 + Math.random()*6;
      setTimeout(scheduleBells, nextDelay*1000);
    }

    // resume context on first user interaction (autoplay policy)
    function startAudio(){
      if(ctx.state === 'suspended'){ ctx.resume(); }
      scheduleBells();
      window.removeEventListener('click', startAudio);
      window.removeEventListener('keydown', startAudio);
    }
    window.addEventListener('click', startAudio);
    window.addEventListener('keydown', startAudio);
  } catch(e){
    console.warn('Audio not supported', e);
  }

})();
</script>
</body>
</html>
